<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Serum Preset Preview</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #000;
  font-family: monospace;
  color: #00ff9c;
}

#frame {
  width: 100%;
  max-width: 1100px;
  margin: 0 auto;
  padding: 20px;
  box-sizing: border-box;
}

#screen {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;
  background: #000;
  overflow: hidden;
}

video {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

#loader {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  letter-spacing: 2px;
  animation: blink 1s infinite;
}

@keyframes blink {
  0% { opacity: .2 }
  50% { opacity: 1 }
  100% { opacity: .2 }
}

#controls {
  margin-top: 12px;
  text-align: center;
}

.arrow {
  cursor: pointer;
  padding: 0 15px;
}

#keys {
  margin-top: 20px;
  display: flex;
  justify-content: center;
  gap: 6px;
}

.key {
  width: 70px;
  height: 140px;
  border: 1px solid #00ff9c;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 10px;
  cursor: pointer;
}

.key:active {
  background: rgba(0,255,156,0.2);
}
</style>
</head>

<body>

<div id="frame">

  <div id="screen">
    <div id="loader">LOADING PRESETS…</div>
    <video id="video" muted playsinline></video>
  </div>

  <div id="controls">
    <span class="arrow" id="prev">◀</span>
    <span id="name">PRESET 01</span>
    <span class="arrow" id="next">▶</span>
  </div>

  <div id="keys">
    <div class="key" data-note="C">C</div>
    <div class="key" data-note="D">D</div>
    <div class="key" data-note="E">E</div>
    <div class="key" data-note="F">F</div>
    <div class="key" data-note="G">G</div>
    <div class="key" data-note="A">A</div>
    <div class="key" data-note="B">B</div>
  </div>

</div>

<script>
const presets = [
  {
    name: "PRESET 01",
    video: "videos/preset1.mp4",
    audio: {
      C: "audio/p1_C.wav",
      D: "audio/p1_D.wav",
      E: "audio/p1_E.wav",
      F: "audio/p1_F.wav",
      G: "audio/p1_G.wav",
      A: "audio/p1_A.wav",
      B: "audio/p1_B.wav"
    }
  }
];

let current = 0;
const video = document.getElementById("video");
const loader = document.getElementById("loader");
const name = document.getElementById("name");

setTimeout(() => {
  loader.style.display = "none";
}, 3000);

function loadPreset(i) {
  const p = presets[i];
  name.textContent = p.name;
  video.src = p.video;
  video.currentTime = 0;
}

document.getElementById("prev").onclick = () => {
  current = (current - 1 + presets.length) % presets.length;
  loadPreset(current);
};

document.getElementById("next").onclick = () => {
  current = (current + 1) % presets.length;
  loadPreset(current);
};

document.querySelectorAll(".key").forEach(k => {
  k.addEventListener("mousedown", () => {
    const note = k.dataset.note;
    const src = presets[current].audio[note];

    const audio = new Audio(src);
    audio.play();

    video.currentTime = 0;
    video.play().catch(()=>{});
  });
});

loadPreset(current);
</script>

</body>
</html>
