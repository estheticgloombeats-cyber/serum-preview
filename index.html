<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Serum Preset Preview</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #000;
  font-family: monospace;
  color: #00ff9c;
  overflow: hidden;
}

/* WRAPPER */
#app {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  box-sizing: border-box;
}

/* VIDEO */
#video-wrap {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;
  background: #000;
}

video {
  width: 100%;
  height: 100%;
  object-fit: contain;
  pointer-events: none;
}

/* LOADER */
#loader {
  position: absolute;
  inset: 0;
  background: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  letter-spacing: 2px;
  animation: flicker 1.2s infinite;
  z-index: 5;
}

.hidden {
  display: none;
}

@keyframes flicker {
  0% { opacity: 0.2; }
  50% { opacity: 1; }
  100% { opacity: 0.2; }
}

/* PRESET NAV */
#preset-nav {
  margin: 15px 0;
  text-align: center;
}

.arrow {
  cursor: pointer;
  padding: 0 15px;
  font-size: 18px;
}

#preset-name {
  display: inline-block;
  min-width: 120px;
}

/* KEYS */
#keys {
  display: flex;
  justify-content: center;
  gap: 6px;
  margin-top: 20px;
}

.key {
  width: 70px;
  height: 140px;
  border: 1px solid #00ff9c;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 10px;
  cursor: pointer;
  user-select: none;
  transition: background 0.05s;
}

.key:active {
  background: rgba(0,255,156,0.2);
}
</style>
</head>

<body>

<div id="app">

  <div id="video-wrap">
    <div id="loader">LOADING PRESETS…</div>
    <video id="video" muted playsinline></video>
  </div>

  <div id="preset-nav">
    <span class="arrow" id="prev">◀</span>
    <span id="preset-name">PRESET 01</span>
    <span class="arrow" id="next">▶</span>
  </div>

  <div id="keys">
    <div class="key" data-note="C">C</div>
    <div class="key" data-note="D">D</div>
    <div class="key" data-note="E">E</div>
    <div class="key" data-note="F">F</div>
    <div class="key" data-note="G">G</div>
    <div class="key" data-note="A">A</div>
    <div class="key" data-note="B">B</div>
  </div>

</div>

<audio id="audio"></audio>

<script>
const presets = [
  {
    name: "PRESET 01",
    video: "videos/preset1.mp4",
    audio: {
      C: "audio/p1_C.wav",
      D: "audio/p1_D.wav",
      E: "audio/p1_E.wav",
      F: "audio/p1_F.wav",
      G: "audio/p1_G.wav",
      A: "audio/p1_A.wav",
      B: "audio/p1_B.wav"
    }
  }
];

let index = 0;
const video = document.getElementById("video");
const audio = document.getElementById("audio");
const loader = document.getElementById("loader");
const presetName = document.getElementById("preset-name");

/* LOADER FAILSAFE */
setTimeout(() => {
  loader.classList.add("hidden");
}, 4000);

/* LOAD PRESET */
function loadPreset(i) {
  const p = presets[i];
  presetName.textContent = p.name;

  video.src = p.video;
  video.currentTime = 0;
  video.play().catch(()=>{});
}

/* NAV */
document.getElementById("prev").onclick = () => {
  index = (index - 1 + presets.length) % presets.length;
  loadPreset(index);
};

document.getElementById("next").onclick = () => {
  index = (index + 1) % presets.length;
  loadPreset(index);
};

/* KEYS = USER GESTURE */
document.querySelectorAll(".key").forEach(key => {
  key.addEventListener("mousedown", () => {
    const note = key.dataset.note;
    const src = presets[index].audio[note];

    audio.pause();
    audio.src = src;
    audio.currentTime = 0;
    audio.play();

    video.currentTime = 0;
    video.play().catch(()=>{});
  });
});

/* INIT */
loadPreset(index);
</script>

</body>
</html>
